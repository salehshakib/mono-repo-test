# Two-tier commit validation
# Try strict conventional commits first, fall back to relaxed if it fails

echo "Checking commit message (strict mode)..."
if COMMITLINT_STRICT=2 npx --no -- commitlint --edit "$1" 2>/dev/null; then
  echo "✓ Commit message follows conventional commits standard"
  exit 0
else
  echo "⚠ Strict validation failed, trying relaxed mode..."
  if COMMITLINT_STRICT=0 npx --no -- commitlint --edit "$1"; then
    echo "✓ Commit message is acceptable (relaxed standard)"
    exit 0
  else
    echo "✗ Commit message rejected. Must be at least 10 characters and descriptive."
    exit 1
  fi
fi